<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-01-07 11:08:56              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace App\Repository; use App\Extension\AliOss; use App\Models\Books; use App\Models\BooksCates; use Illuminate\Http\Request; use Illuminate\Support\Facades\Validator; class BookRepository extends Repository { public function getList(Request $QiZOc) : array { goto pm6EL; qnqIa: Bne0n: goto hpKPm; gpCAk: foreach ($C78ax["\x64\141\x74\141"] as $xDQIL => $KRCKZ) { $C78ax["\x64\x61\164\x61"][$xDQIL]["\x6e\x6f\x76\x65\x6c\137\160\x69\143"] = $Ut9_e->getAbsoluteUrl($KRCKZ["\156\157\166\x65\154\x5f\x70\151\143"]); RQxAI: } goto qnqIa; pm6EL: $C78ax = Books::where("\144\x65\154\x65\164\145\144", "\75", 0)->when($QiZOc->get("\156\x6f\166\145\154\137\x6e\x61\155\x65"), function ($SkUGn) use($QiZOc) { return $SkUGn->where("\156\x6f\x76\x65\154\137\x6e\x61\x6d\145", "\x6c\151\x6b\145", $QiZOc->get("\x6e\157\166\145\x6c\137\156\x61\x6d\145") . "\45"); })->when($QiZOc->get("\157\x6e\x6c\x69\x6e\x65") !== null, function ($SkUGn) use($QiZOc) { return $SkUGn->whereIn("\157\x6e\154\151\x6e\145", $QiZOc->get("\x6f\156\154\x69\156\x65") === "\141\154\154" ? [1, 0] : [$QiZOc->get("\157\156\154\151\156\x65") * 1]); })->with("\143\x61\164\145", function ($SkUGn) { return $SkUGn->where("\x62\157\157\153\x73\137\x63\x61\x74\x65\163\x2e\144\145\154\x65\x74\x65\x64", "\75", 0); })->with("\164\x61\x67", function ($SkUGn) { return $SkUGn->where("\142\157\x6f\153\163\x5f\164\141\x67\x73\56\144\145\x6c\145\164\145\x64", "\x3d", 0); })->paginate($this->FfaKn, ["\x2a"])->toArray(); goto CUuA2; CUuA2: $Ut9_e = new AliOss(); goto gpCAk; hpKPm: return $C78ax; goto D0X1r; D0X1r: } public function addBook(Request $QiZOc) : array { goto upzXx; WoNS4: try { goto gVoM2; y_PER: Books::insert(["\x74\x69\164\154\x65" => $QiZOc->post("\x74\x69\x74\x6c\x65"), "\143\162\x65\x61\x74\x65\x64\137\x61\164" => time()]); goto NEjSr; WjXkj: Euz5e: goto y_PER; gVoM2: if (!Books::where("\164\151\x74\x6c\x65", $QiZOc->post("\x74\151\x74\x6c\145"))->where("\144\x65\154\145\x74\x65\144", 0)->count()) { goto Euz5e; } goto mgkgZ; mgkgZ: throw new \Exception("\345\220\215\347\xa7\xb0\345\267\xb2\347\xbb\x8f\345\xad\230\345\234\xa8"); goto WjXkj; NEjSr: return ["\x63\x6f\144\x65" => 0, "\x64\x61\x74\x61" => [], "\155\x73\147" => "\xe6\x88\x90\xe5\x8a\x9f"]; goto rLBfA; rLBfA: } catch (\Exception $FBi7X) { return ["\143\x6f\x64\x65" => 1, "\155\163\147" => $FBi7X->getMessage()]; } goto dsQ7K; tsc31: i3qqM: goto WoNS4; jzVYp: return ["\143\x6f\144\x65" => 1, "\x6d\x73\147" => $UGmxt->errors()->first()]; goto tsc31; upzXx: $UGmxt = Validator::make($QiZOc->all(), ["\x74\x69\x74\x6c\145" => "\x72\145\x71\165\x69\162\x65\x64\174\155\x61\170\x3a\63\62"], ["\x74\x69\x74\154\x65\x2e\162\x65\x71\x75\151\162\x65\x64" => "\xe5\220\215\xe7\xa7\xb0\xe5\xbf\x85\xe9\241\xbb", "\164\x69\164\154\145\56\155\141\170" => "\xe5\220\x8d\347\xa7\xb0\346\x9c\x80\345\xa4\247\351\x95\xbf\345\272\xa6\xe4\xb8\215\xe8\266\x85\350\xbf\x87\x33\x32\345\xad\227\xe7\xac\246"]); goto LTsIj; LTsIj: if (!$UGmxt->fails()) { goto i3qqM; } goto jzVYp; dsQ7K: } public function updateBook(Request $QiZOc) : array { goto Wl7GN; FXS8b: return ["\143\157\x64\145" => 1, "\x6d\163\147" => $UGmxt->errors()->first()]; goto DJ1mB; zjLGN: try { goto AYAZu; IVhxG: Books::updateOrCreate(["\x69\x64" => $QiZOc->post("\151\x64")], ["\164\151\x74\154\145" => $QiZOc->post("\x74\x69\164\x6c\x65")]); goto kqrZI; aFzyY: throw new \Exception("\xe5\x90\x8d\xe7\xa7\260\345\267\xb2\347\273\x8f\xe5\255\230\345\x9c\250"); goto EYPLO; kqrZI: return ["\x63\157\x64\x65" => 0, "\144\x61\x74\x61" => [], "\155\x73\x67" => "\346\x88\x90\xe5\x8a\x9f"]; goto jQhV0; AYAZu: if (!Books::where("\164\x69\164\x6c\145", $QiZOc->post("\164\151\x74\154\x65"))->where("\144\x65\x6c\145\164\145\x64", 0)->where("\x69\144", "\x3c\x3e", $QiZOc->get("\151\144"))->count()) { goto ySlh0; } goto aFzyY; EYPLO: ySlh0: goto IVhxG; jQhV0: } catch (\Exception $FBi7X) { return ["\x63\x6f\x64\x65" => 1, "\x6d\x73\x67" => $FBi7X->getMessage()]; } goto ymReI; JhO2H: if (!$UGmxt->fails()) { goto iQ_Ph; } goto FXS8b; Wl7GN: $UGmxt = Validator::make($QiZOc->all(), ["\151\144" => "\x72\x65\x71\165\151\162\145\144", "\164\x69\164\x6c\x65" => "\x72\145\x71\x75\151\162\x65\x64\x7c\x6d\x61\x78\x3a\x33\x32"], ["\151\x64\x2e\162\x65\x71\165\x69\x72\x65\144" => "\111\104\xe5\xbf\x85\xe9\241\xbb", "\x74\151\x74\x6c\x65\56\162\x65\x71\165\151\x72\145\144" => "\xe5\x90\215\347\xa7\260\xe5\xbf\205\xe9\241\xbb", "\164\151\x74\154\x65\x2e\x6d\141\x78" => "\xe5\x90\x8d\xe7\247\xb0\346\234\200\345\xa4\xa7\xe9\225\277\345\272\246\344\270\x8d\350\xb6\205\xe8\277\x87\63\62\345\255\227\347\254\246"]); goto JhO2H; DJ1mB: iQ_Ph: goto zjLGN; ymReI: } public function onlineBook(Request $QiZOc) : array { goto jmPUw; QefOk: if (!$UGmxt->fails()) { goto VuCUP; } goto LNIpQ; jmPUw: $UGmxt = Validator::make($QiZOc->all(), ["\x69\x64" => "\x72\x65\x71\x75\151\162\145\x64"], ["\151\x64\x2e\162\x65\x71\165\151\x72\x65\x64" => "\x49\x44\xe5\277\205\351\241\xbb"]); goto QefOk; oFeLu: try { goto ny4nH; CNyd5: Books::updateOrCreate(["\x69\144" => $QiZOc->post("\x69\144")], ["\x6f\156\x6c\151\156\x65" => $QiZOc->post("\157\x6e\154\151\156\x65") ? 1 : 0]); goto J_cii; ny4nH: if (!($QiZOc->post("\157\x6e\154\151\156\145") && BooksCates::where("\142\157\157\153\x5f\151\144", "\x3d", $QiZOc->post("\x69\x64"))->where("\144\145\154\145\164\x65\144", "\75", 0)->count() === 0)) { goto XVCzu; } goto PxQ7Z; PxQ7Z: return ["\x63\157\144\145" => 1, "\x64\141\164\141" => [], "\x6d\x73\x67" => "\xe8\xaf\267\xe5\x85\x88\xe8\xae\xbe\xe7\275\256\xe7\xb1\xbb\xe7\x9b\xae"]; goto aVs1L; aVs1L: XVCzu: goto CNyd5; J_cii: return ["\x63\157\x64\145" => 0, "\144\x61\x74\141" => [], "\155\x73\x67" => "\346\210\x90\345\212\237"]; goto IIXQ_; IIXQ_: } catch (\Exception $FBi7X) { return ["\143\157\144\x65" => 1, "\x6d\163\x67" => $FBi7X->getMessage()]; } goto q0OcI; rfWlz: VuCUP: goto oFeLu; LNIpQ: return ["\143\157\x64\145" => 1, "\155\163\147" => $UGmxt->errors()->first()]; goto rfWlz; q0OcI: } public function removeBook(Request $QiZOc) : array { goto iGDDc; OdgwN: if (!$UGmxt->fails()) { goto DsBxF; } goto Yb65x; ZzjkC: DsBxF: goto efW21; efW21: try { Books::updateOrCreate(["\x69\x64" => $QiZOc->post("\151\144")], ["\x64\145\x6c\145\x74\145\144" => 1]); return ["\143\x6f\x64\x65" => 0, "\x64\141\164\141" => [], "\155\163\147" => "\346\210\220\xe5\212\x9f"]; } catch (\Exception $FBi7X) { return ["\143\157\144\145" => 1, "\155\x73\x67" => $FBi7X->getMessage()]; } goto RxjzK; Yb65x: return ["\x63\157\144\145" => 1, "\x6d\163\147" => $UGmxt->errors()->first()]; goto ZzjkC; iGDDc: $UGmxt = Validator::make($QiZOc->all(), ["\151\144" => "\x72\145\x71\x75\151\x72\x65\x64"], ["\x69\x64\x2e\x72\x65\161\165\151\162\145\x64" => "\111\104\xe5\277\205\351\xa1\xbb"]); goto OdgwN; RxjzK: } public function updateBookCate(Request $QiZOc) : array { goto Vt0Hj; bGyID: if (!$UGmxt->fails()) { goto SzihC; } goto mupYK; mupYK: return ["\x63\157\x64\x65" => 1, "\x6d\163\x67" => $UGmxt->errors()->first()]; goto svzmz; Vt0Hj: $UGmxt = Validator::make($QiZOc->all(), ["\x69\144" => "\x72\145\161\165\151\162\x65\144", "\x63\x61\x74\x65\x5f\151\144" => "\x72\x65\x71\x75\151\162\145\x64\x7c\141\x72\162\141\171", "\x66\x72\145\145\137\156\165\x6d" => "\x72\145\161\165\x69\162\x65\x64\174\x69\156\164\x65\147\145\162\174\155\x69\156\x3a\60", "\x74\150\x6f\x75\163\x61\x6e\x64\x5f\x77\157\162\x64\x73\137\x70\x72\151\x63\x65" => "\162\145\161\x75\x69\x72\x65\x64\174\x69\x6e\164\x65\147\x65\162\174\155\x69\156\72\60"], ["\x69\x64\56\x72\x65\x71\x75\151\162\x65\x64" => "\111\104\345\xbf\205\351\xa1\xbb", "\x63\141\x74\145\137\x69\144\56\x72\145\161\165\x69\162\145\x64" => "\347\xb1\xbb\347\x9b\256\x69\x64\344\270\215\xe8\203\xbd\xe4\270\272\347\251\xba", "\146\162\145\x65\137\156\165\x6d\x2e\162\145\161\165\151\x72\x65\x64" => "\xe5\205\x8d\350\xb4\xb9\347\xab\xa0\xe8\x8a\202\xe4\xb8\x8d\xe8\203\xbd\344\xb8\272\xe7\xa9\272", "\x74\x68\157\165\x73\x61\156\144\x5f\x77\x6f\162\x64\163\x5f\x70\x72\x69\143\x65\56\x72\x65\161\x75\x69\162\x65\x64" => "\345\215\x83\xe5\xad\227\xe4\273\267\346\240\xbc\344\270\x8d\350\203\xbd\344\xb8\xba\347\xa9\xba"]); goto bGyID; lO5SS: return ["\143\157\144\145" => 1, "\155\x73\x67" => "\xe7\xb1\273\347\233\xae\xe4\270\215\350\203\xbd\350\xb6\x85\350\277\x87\x34\344\xb8\252"]; goto LxGJU; svzmz: SzihC: goto wDWyI; LxGJU: OvQsG: goto VceKA; wDWyI: if (!(count($QiZOc->post("\143\x61\x74\x65\x5f\x69\144")) > 4)) { goto OvQsG; } goto lO5SS; VceKA: try { goto Vxr2E; c1nxY: BooksCatesRepository::add($QiZOc->post("\x69\x64"), $QiZOc->post("\x63\x61\164\145\x5f\x69\x64")); goto GQfMR; Vxr2E: Books::updateOrCreate(["\x69\x64" => $QiZOc->post("\151\x64")], ["\147\157\x6f\144\137\x64\x65\164\x61\x69\x6c" => $QiZOc->post("\x67\x6f\x6f\x64\x5f\x64\145\164\141\151\x6c", '') ?: '', "\146\x72\x65\x65\137\156\x75\155" => $QiZOc->post("\146\162\x65\x65\137\156\x75\x6d"), "\x74\150\x6f\x75\163\x61\156\x64\137\x77\x6f\162\x64\x73\137\160\162\x69\143\x65" => $QiZOc->post("\x74\x68\x6f\x75\x73\x61\x6e\144\137\x77\x6f\162\x64\163\137\x70\x72\151\x63\145"), "\x75\x70\144\x61\x74\x65\144\x5f\x61\164" => time()]); goto c1nxY; GQfMR: BooksTagsRepository::add($QiZOc->post("\151\144"), $QiZOc->post("\164\141\x67\137\x69\x64")); goto xXEMg; xXEMg: return ["\143\157\144\x65" => 0, "\x64\x61\x74\141" => [], "\x6d\163\x67" => "\346\x88\220\345\x8a\x9f"]; goto UxNTz; UxNTz: } catch (\Exception $FBi7X) { return ["\143\157\x64\x65" => 1, "\x6d\x73\x67" => $FBi7X->getMessage()]; } goto CWgfk; CWgfk: } }
