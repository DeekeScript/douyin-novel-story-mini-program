(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[909],{64317:function(V,R,e){"use strict";var l=e(22122),o=e(28991),E=e(81253),y=e(22270),a=e(67294),m=e(66758),I=e(81160),_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],h=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=a.forwardRef(function(r,i){var Z=r.fieldProps,d=r.children,t=r.params,L=r.proFieldProps,W=r.mode,B=r.valueEnum,U=r.request,w=r.showSearch,K=r.options,j=(0,E.Z)(r,_),$=(0,a.useContext)(m.Z);return a.createElement(I.Z,(0,l.Z)({mode:"edit",valueEnum:(0,y.h)(B),request:U,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:K,mode:W,showSearch:w,getPopupContainer:$.getPopupContainer},Z),ref:i,proFieldProps:L},j),d)}),S=a.forwardRef(function(r,i){var Z=r.fieldProps,d=r.children,t=r.params,L=r.proFieldProps,W=r.mode,B=r.valueEnum,U=r.request,w=r.options,K=(0,E.Z)(r,h),j=(0,o.Z)({options:w,mode:W||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Z),$=(0,a.useContext)(m.Z);return a.createElement(I.Z,(0,l.Z)({mode:"edit",valueEnum:(0,y.h)(B),request:U,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:$.getPopupContainer},j),ref:i,proFieldProps:L},K),d)}),v=T,M=S,b=v;b.SearchSelect=M,b.displayName="ProFormComponent",R.Z=b},5966:function(V,R,e){"use strict";var l=e(22122),o=e(81253),E=e(67294),y=e(81160),a=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],I="text",_=function(v){var M=v.fieldProps,b=v.proFieldProps,r=(0,o.Z)(v,a);return E.createElement(y.Z,(0,l.Z)({mode:"edit",valueType:I,fieldProps:M,filedConfig:{valueType:I},proFieldProps:b},r))},h=function(v){var M=v.fieldProps,b=v.proFieldProps,r=(0,o.Z)(v,m);return E.createElement(y.Z,(0,l.Z)({mode:"edit",valueType:"password",fieldProps:M,proFieldProps:b,filedConfig:{valueType:I}},r))},T=_;T.Password=h,T.displayName="ProFormComponent",R.Z=T},94750:function(V,R,e){"use strict";var l=e(5632);R.Z=function(o){var E=(0,l.md)();return E.buttonHasAccess(o)?o.children:null}},66304:function(V,R,e){"use strict";e.r(R),e.d(R,{default:function(){return ae}});var l=e(62350),o=e(24565),E=e(57663),y=e(71577),a=e(90636),m=e(11849),I=e(34792),_=e(48086),h=e(3182),T=e(2824),S=e(21704);function v(u,P){return M.apply(this,arguments)}function M(){return M=(0,h.Z)((0,a.Z)().mark(function u(P,F){return(0,a.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,S.WY)("/api/role/adminList",(0,m.Z)({method:"GET",params:(0,m.Z)({},P)},F||{})));case 1:case"end":return s.stop()}},u)})),M.apply(this,arguments)}function b(u,P){return r.apply(this,arguments)}function r(){return r=(0,h.Z)((0,a.Z)().mark(function u(P,F){return(0,a.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,S.WY)("/api/role/updateAdmin",(0,m.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:P},F||{})));case 1:case"end":return s.stop()}},u)})),r.apply(this,arguments)}function i(u,P){return Z.apply(this,arguments)}function Z(){return Z=(0,h.Z)((0,a.Z)().mark(function u(P,F){return(0,a.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,S.WY)("/api/role/addAdmin",(0,m.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:P},F||{})));case 1:case"end":return s.stop()}},u)})),Z.apply(this,arguments)}function d(u){return t.apply(this,arguments)}function t(){return t=(0,h.Z)((0,a.Z)().mark(function u(P){return(0,a.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,S.WY)("/api/role/removeAdmin",{method:"get",params:(0,m.Z)({},P)}));case 1:case"end":return O.stop()}},u)})),t.apply(this,arguments)}var L=e(60625),W=e(49101),B=e(67265),U=e(77022),w=e(67294),K=e(37476),j=e(5966),$=e(64317),c=e(85893),ee=function(u){var P=[];for(var F in u.roleIdName)P.push({label:u.roleIdName[F],value:F});return(0,c.jsxs)(K.Y,{title:"\u7F16\u8F91",width:400+"px",initialValues:u.values,visible:u.updateModalVisible,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:u.onCancel},submitTimeout:2e3,onFinish:function(){var O=(0,h.Z)((0,a.Z)().mark(function s(G){return(0,a.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return G.id=u.values.id,x.next=3,u.onSubmit(G);case 3:case"end":return x.stop()}},s)}));return function(s){return O.apply(this,arguments)}}(),children:[(0,c.jsx)(j.Z,{name:"username",label:"\u7528\u6237\u540D"}),(0,c.jsx)(j.Z,{name:"name",label:"\u59D3\u540D"}),(0,c.jsx)(j.Z,{name:"mobile",label:"\u624B\u673A\u53F7"}),(0,c.jsx)($.Z,{name:"role_id",label:"\u89D2\u8272",options:P}),(0,c.jsx)(j.Z,{name:"password",label:"\u5BC6\u7801",placeholder:"\u4E0D\u586B\u5219\u4E0D\u91CD\u7F6E"})]})},H=e(94750),re=function(){var P=(0,w.useState)(!1),F=(0,T.Z)(P,2),O=F[0],s=F[1],G=(0,w.useState)(!1),J=(0,T.Z)(G,1),x=J[0],N=(0,w.useRef)(),ne=(0,w.useState)(),Q=(0,T.Z)(ne,2),X=Q[0],z=Q[1],te=(0,w.useState)(),k=(0,T.Z)(te,2),q=k[0],se=k[1],ue=function(){var A=(0,h.Z)((0,a.Z)().mark(function C(p){var f,g;return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=_.ZP.loading("Configuring"),p.id){n.next=7;break}return n.next=4,i((0,m.Z)({},p));case 4:g=n.sent,n.next=10;break;case 7:return n.next=9,b((0,m.Z)({},p));case 9:g=n.sent;case 10:if(f(),g.code!==0){n.next=14;break}return _.ZP.success("\u6210\u529F"),n.abrupt("return",!0);case 14:return n.abrupt("return",!1);case 15:case"end":return n.stop()}},C)}));return function(p){return A.apply(this,arguments)}}(),le=function(){var A=(0,h.Z)((0,a.Z)().mark(function C(p){var f,g;return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=_.ZP.loading("\u6B63\u5728\u5220\u9664"),p){n.next=3;break}return n.abrupt("return",!0);case 3:return n.next=5,d({id:p.id});case 5:if(g=n.sent,f(),g.code!==0){n.next=10;break}return _.ZP.success("\u5220\u9664\u6210\u529F"),n.abrupt("return",!0);case 10:return n.abrupt("return",!1);case 11:case"end":return n.stop()}},C)}));return function(p){return A.apply(this,arguments)}}();(0,w.useEffect)(function(){function A(){return C.apply(this,arguments)}function C(){return C=(0,h.Z)((0,a.Z)().mark(function p(){var f,g,D;return(0,a.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,L.LP)({});case 2:if(f=Y.sent,f.code===0){g=[];for(D in f.data)g[D]=f.data[D];se(g)}case 4:case"end":return Y.stop()}},p)})),C.apply(this,arguments)}A().then()},[X]);var oe=[{title:"ID",dataIndex:"id",search:!1},{title:"\u7528\u6237\u540D",dataIndex:"username",valueType:"text"},{title:"\u59D3\u540D",dataIndex:"name",valueType:"text"},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",valueType:"text"},{title:"\u89D2\u8272",dataIndex:"roleName",valueType:"select",valueEnum:q},{title:"\u4FEE\u6539\u65F6\u95F4",sorter:!0,dataIndex:"updated_at",valueType:"dateTime",search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"created_at",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:180,render:function(C,p){return[(0,c.jsx)(H.Z,{access:"/role/updateAdmin",children:(0,c.jsx)("a",{onClick:function(){s(!0),z(p)},children:"\u4FEE\u6539"},"update"+p.id)},"if_update_"+p.id),(0,c.jsx)(H.Z,{access:"/role/removeAdmin",children:(0,c.jsx)(o.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:(0,h.Z)((0,a.Z)().mark(function f(){var g;return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,le(p);case 2:g=n.sent,g&&N.current&&N.current.reload();case 4:case"end":return n.stop()}},f)})),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,c.jsx)(y.Z,{type:"primary",size:"small",danger:!0,children:"\u5220\u9664"})})},"if_delete_"+p.id)]}}];return(0,c.jsxs)(B.ZP,{children:[(0,c.jsx)(U.Z,{actionRef:N,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,c.jsx)(H.Z,{access:"/role/addAdmin",children:(0,c.jsxs)(y.Z,{type:"primary",onClick:function(){s(!0),z(void 0)},children:[(0,c.jsx)(W.Z,{})," \u6DFB\u52A0"]},"primary")},"if_add_")]},request:v,columns:oe}),(0,c.jsx)(ee,{onSubmit:function(){var A=(0,h.Z)((0,a.Z)().mark(function C(p){var f;return(0,a.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,ue(p);case 2:f=D.sent,f&&(s(!1),z(void 0),N.current&&N.current.reload());case 4:case"end":return D.stop()}},C)}));return function(C){return A.apply(this,arguments)}}(),onCancel:function(){s(!1),x||z(void 0)},updateModalVisible:O,values:X||{},roleIdName:q})]})},ae=re},60625:function(V,R,e){"use strict";e.d(R,{Uy:function(){return a},ul:function(){return I},_d:function(){return h},l5:function(){return S},LP:function(){return M}});var l=e(90636),o=e(11849),E=e(3182),y=e(21704);function a(r,i){return m.apply(this,arguments)}function m(){return m=(0,E.Z)((0,l.Z)().mark(function r(i,Z){return(0,l.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.WY)("/api/role/roleList",(0,o.Z)({method:"GET",params:(0,o.Z)({},i)},Z||{})));case 1:case"end":return t.stop()}},r)})),m.apply(this,arguments)}function I(r,i){return _.apply(this,arguments)}function _(){return _=(0,E.Z)((0,l.Z)().mark(function r(i,Z){return(0,l.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.WY)("/api/role/updateRole",(0,o.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:i},Z||{})));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}function h(r,i){return T.apply(this,arguments)}function T(){return T=(0,E.Z)((0,l.Z)().mark(function r(i,Z){return(0,l.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.WY)("/api/role/addRole",(0,o.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:i},Z||{})));case 1:case"end":return t.stop()}},r)})),T.apply(this,arguments)}function S(r){return v.apply(this,arguments)}function v(){return v=(0,E.Z)((0,l.Z)().mark(function r(i){return(0,l.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,y.WY)("/api/role/removeRole",{method:"get",params:(0,o.Z)({},i)}));case 1:case"end":return d.stop()}},r)})),v.apply(this,arguments)}function M(r){return b.apply(this,arguments)}function b(){return b=(0,E.Z)((0,l.Z)().mark(function r(i){return(0,l.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,y.WY)("/api/role/idName",{method:"get",params:(0,o.Z)({},i)}));case 1:case"end":return d.stop()}},r)})),b.apply(this,arguments)}}}]);
