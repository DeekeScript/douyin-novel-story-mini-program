(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[415],{64317:function(U,y,e){"use strict";var o=e(22122),d=e(28991),h=e(81253),P=e(22270),n=e(67294),F=e(66758),g=e(81160),m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],v=n.forwardRef(function(r,Z){var s=r.fieldProps,I=r.children,u=r.params,R=r.proFieldProps,O=r.mode,W=r.valueEnum,B=r.request,D=r.showSearch,j=r.options,A=(0,h.Z)(r,m),S=(0,n.useContext)(F.Z);return n.createElement(g.Z,(0,o.Z)({mode:"edit",valueEnum:(0,P.h)(W),request:B,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:j,mode:O,showSearch:D,getPopupContainer:S.getPopupContainer},s),ref:Z,proFieldProps:R},A),I)}),b=n.forwardRef(function(r,Z){var s=r.fieldProps,I=r.children,u=r.params,R=r.proFieldProps,O=r.mode,W=r.valueEnum,B=r.request,D=r.options,j=(0,h.Z)(r,C),A=(0,d.Z)({options:D,mode:O||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},s),S=(0,n.useContext)(F.Z);return n.createElement(g.Z,(0,o.Z)({mode:"edit",valueEnum:(0,P.h)(W),request:B,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:S.getPopupContainer},A),ref:Z,proFieldProps:R},j),I)}),c=v,i=b,l=c;l.SearchSelect=i,l.displayName="ProFormComponent",y.Z=l},5966:function(U,y,e){"use strict";var o=e(22122),d=e(81253),h=e(67294),P=e(81160),n=["fieldProps","proFieldProps"],F=["fieldProps","proFieldProps"],g="text",m=function(c){var i=c.fieldProps,l=c.proFieldProps,r=(0,d.Z)(c,n);return h.createElement(P.Z,(0,o.Z)({mode:"edit",valueType:g,fieldProps:i,filedConfig:{valueType:g},proFieldProps:l},r))},C=function(c){var i=c.fieldProps,l=c.proFieldProps,r=(0,d.Z)(c,F);return h.createElement(P.Z,(0,o.Z)({mode:"edit",valueType:"password",fieldProps:i,proFieldProps:l,filedConfig:{valueType:g}},r))},v=m;v.Password=C,v.displayName="ProFormComponent",y.Z=v},94750:function(U,y,e){"use strict";var o=e(5632);y.Z=function(d){var h=(0,o.md)();return h.buttonHasAccess(d)?d.children:null}},26469:function(U,y,e){"use strict";e.r(y),e.d(y,{default:function(){return B}});var o=e(62350),d=e(24565),h=e(57663),P=e(71577),n=e(90636),F=e(11849),g=e(34792),m=e(48086),C=e(3182),v=e(2824),b=e(88713),c=e(49101),i=e(67265),l=e(77022),r=e(67294),Z=e(37476),s=e(5966),I=e(64317),u=e(85893),R=function(D){return(0,u.jsxs)(Z.Y,{title:"\u7F16\u8F91",width:400+"px",initialValues:D.values,visible:D.updateModalVisible,layout:"horizontal",autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:D.onCancel},submitTimeout:2e3,onFinish:function(){var j=(0,C.Z)((0,n.Z)().mark(function A(S){return(0,n.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return S.id=D.values.id,_.next=3,D.onSubmit(S);case 3:return _.abrupt("return",_.sent);case 4:case"end":return _.stop()}},A)}));return function(A){return j.apply(this,arguments)}}(),children:[(0,u.jsx)(s.Z,{name:"name",label:"\u540D\u79F0"}),(0,u.jsx)(s.Z,{name:"route",label:"\u8DEF\u7531"}),(0,u.jsx)(I.Z,{name:"level",label:"\u7C7B\u578B",options:[{label:"\u83DC\u5355",value:0},{label:"\u529F\u80FD",value:1}]})]})},O=e(94750),W=function(){var j=(0,r.useState)(!1),A=(0,v.Z)(j,2),S=A[0],x=A[1],_=(0,r.useState)(!1),G=(0,v.Z)(_,1),Y=G[0],L=(0,r.useRef)(),z=(0,r.useState)(),K=(0,v.Z)(z,2),N=K[0],w=K[1],H=(0,r.useState)(0),$=(0,v.Z)(H,2),J=$[0],V=$[1],Q=function(){var M=(0,C.Z)((0,n.Z)().mark(function E(a){var p,T;return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.parentId=J,p=m.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),t.next=4,(0,b.KG)((0,F.Z)({},a));case 4:if(T=t.sent,p(),T.code!==0){t.next=9;break}return m.ZP.success("\u6DFB\u52A0\u6210\u529F"),t.abrupt("return",!0);case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}},E)}));return function(a){return M.apply(this,arguments)}}(),X=function(){var M=(0,C.Z)((0,n.Z)().mark(function E(a){var p,T;return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p=m.ZP.loading("Configuring"),t.next=3,(0,b.Gx)((0,F.Z)({},a));case 3:if(T=t.sent,p(),T.code!==0){t.next=8;break}return m.ZP.success("\u66F4\u65B0\u6210\u529F"),t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},E)}));return function(a){return M.apply(this,arguments)}}(),k=function(){var M=(0,C.Z)((0,n.Z)().mark(function E(a){var p,T;return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p=m.ZP.loading("\u6B63\u5728\u5220\u9664"),a){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,(0,b.iR)({id:a.id});case 5:if(T=t.sent,p(),T.code!==0){t.next=10;break}return m.ZP.success("\u5220\u9664\u6210\u529F"),t.abrupt("return",!0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}},E)}));return function(a){return M.apply(this,arguments)}}(),q=[{title:"ID",dataIndex:"id",search:!1},{title:"\u540D\u79F0",dataIndex:"name",valueType:"text",search:!1},{title:"\u7C7B\u578B",dataIndex:"level",valueType:"select",search:!1,valueEnum:{0:{text:"\u83DC\u5355",status:"Error"},1:{text:"\u529F\u80FD",status:"Success",disabled:!0}}},{title:"\u8DEF\u7531",dataIndex:"route",valueType:"text",search:!1},{title:"\u4FEE\u6539\u65F6\u95F4",sorter:!0,dataIndex:"updated_at",valueType:"dateTime",search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"created_at",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:220,render:function(E,a){return[(0,u.jsx)(O.Z,{access:"/role/updateAction",children:(0,u.jsx)("a",{onClick:function(){x(!0),w(a)},children:"\u4FEE\u6539"},"update"+a.id)},"update_if_"+a.id),a.level===0?(0,u.jsx)(O.Z,{access:"/role/addAction",children:(0,u.jsx)("a",{onClick:function(){x(!0),w(void 0),V(a.id)},children:"\u6DFB\u52A0\u5B50\u529F\u80FD"},"child"+a.id)},"add_if_"+a.id):null,(0,u.jsx)(O.Z,{access:"/role/removeAction",children:(0,u.jsx)(d.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:(0,C.Z)((0,n.Z)().mark(function p(){var T;return(0,n.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(a);case 2:T=t.sent,T&&L.current&&L.current.reload();case 4:case"end":return t.stop()}},p)})),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,u.jsx)(P.Z,{type:"primary",size:"small",danger:!0,children:"\u5220\u9664"})})},"remove_if_"+a.id)]}}];return(0,u.jsxs)(i.ZP,{children:[(0,u.jsx)(l.Z,{actionRef:L,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,u.jsx)(O.Z,{access:"/role/addAction",children:(0,u.jsxs)(P.Z,{type:"primary",onClick:function(){x(!0),w(void 0),V(0)},children:[(0,u.jsx)(c.Z,{})," \u6DFB\u52A0"]},"primary")},"add_if")]},request:b.VW,columns:q}),(0,u.jsx)(R,{onSubmit:function(){var M=(0,C.Z)((0,n.Z)().mark(function E(a){var p;return(0,n.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!a.id){f.next=6;break}return f.next=3,X(a);case 3:p=f.sent,f.next=9;break;case 6:return f.next=8,Q(a);case 8:p=f.sent;case 9:return p&&(x(!1),w(void 0),L.current&&L.current.reload()),f.abrupt("return",!0);case 11:case"end":return f.stop()}},E)}));return function(E){return M.apply(this,arguments)}}(),onCancel:function(){x(!1),Y||w(void 0)},updateModalVisible:S,values:N||{}})]})},B=W},88713:function(U,y,e){"use strict";e.d(y,{VW:function(){return n},Gx:function(){return g},KG:function(){return C},iR:function(){return b}});var o=e(90636),d=e(11849),h=e(3182),P=e(21704);function n(i,l){return F.apply(this,arguments)}function F(){return F=(0,h.Z)((0,o.Z)().mark(function i(l,r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,P.WY)("/api/role/actionList",(0,d.Z)({method:"GET",params:(0,d.Z)({},l)},r||{})));case 1:case"end":return s.stop()}},i)})),F.apply(this,arguments)}function g(i,l){return m.apply(this,arguments)}function m(){return m=(0,h.Z)((0,o.Z)().mark(function i(l,r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,P.WY)("/api/role/updateAction",(0,d.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:l},r||{})));case 1:case"end":return s.stop()}},i)})),m.apply(this,arguments)}function C(i,l){return v.apply(this,arguments)}function v(){return v=(0,h.Z)((0,o.Z)().mark(function i(l,r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,P.WY)("/api/role/addAction",(0,d.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:l},r||{})));case 1:case"end":return s.stop()}},i)})),v.apply(this,arguments)}function b(i){return c.apply(this,arguments)}function c(){return c=(0,h.Z)((0,o.Z)().mark(function i(l){return(0,o.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,P.WY)("/api/role/removeAction",{method:"get",params:(0,d.Z)({},l)}));case 1:case"end":return Z.stop()}},i)})),c.apply(this,arguments)}}}]);
