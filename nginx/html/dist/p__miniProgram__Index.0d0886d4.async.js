(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[732],{24723:function(se,G,e){"use strict";var d=e(9715),P=e(55843),w=e(11849),Z=e(43185),J=e(94412),I=e(90636),q=e(34792),A=e(48086),R=e(3182),j=e(2824),s=e(67294),F=e(7085),D=e(49101),W=e(88250),g=e(85893);G.Z=function(O){var M,Q=O.extra,T=O.value,z=O.name,N=O.onChange,V=O.title,ee=(0,s.useState)(),r=(0,j.Z)(ee,2),C=r[0],X=r[1],t=(0,s.useState)(!1),o=(0,j.Z)(t,2),_=o[0],a=o[1],p=(0,s.useState)((T==null||(M=T[0])===null||M===void 0?void 0:M.url)||""),ne=(0,j.Z)(p,2),ae=ne[0],b=ne[1],H=(0,g.jsxs)("div",{children:[_?(0,g.jsx)(F.Z,{}):(0,g.jsx)(D.Z,{}),(0,g.jsx)("div",{style:{marginTop:8},children:"\u4E0A\u4F20"})]}),K=function(c,E){var S=new FileReader;S.addEventListener("load",function(){return E(S.result)}),S.readAsDataURL(c)},B=function(c){if(console.log(c.file),c.file.status==="uploading"){a(!0);return}c.file.status==="done"&&K(c.file.originFileObj,function(E){a(!1),b(E)})},k=function(){var x=(0,R.Z)((0,I.Z)().mark(function c(){var E;return(0,I.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,(0,W.Qc)({});case 3:E=h.sent,X(E.data),h.next=10;break;case 7:h.prev=7,h.t0=h.catch(0),A.ZP.error(h.t0);case 10:case"end":return h.stop()}},c,null,[[0,7]])}));return function(){return x.apply(this,arguments)}}();(0,s.useEffect)(function(){k().then(function(x){})},[]);var $=function(c){var E=(T||[]).filter(function(S){return S.url!==c.url});N&&N(E)},Y=function(c){return{key:c.url,OSSAccessKeyId:C==null?void 0:C.accessid,policy:C==null?void 0:C.policy,Signature:C==null?void 0:C.signature}},y=function(){var x=(0,R.Z)((0,I.Z)().mark(function c(E){var S,h,re;return(0,I.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(C){U.next=2;break}return U.abrupt("return",!1);case 2:if(S=Number(C.expire)*1e3,!(S<Date.now())){U.next=6;break}return U.next=6,k();case 6:return h=E.name.slice(E.name.lastIndexOf(".")),re=Date.now()+h,E.url=C.dir+"/"+re,U.abrupt("return",E);case 10:case"end":return U.stop()}},c)}));return function(E){return x.apply(this,arguments)}}(),L={listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:C==null?void 0:C.host,onChange:B,onRemove:$,data:Y,beforeUpload:y};return(0,g.jsx)(P.Z.Item,{name:z||"file",label:V||"\u56FE\u7247",extra:Q,children:(0,g.jsx)(J.Z,(0,w.Z)((0,w.Z)({},L),{},{children:ae?(0,g.jsx)("img",{src:ae,alt:"avatar",style:{maxWidth:"100%",maxHeight:"100%"}}):H}))})}},76319:function(se,G,e){"use strict";e.r(G),e.d(G,{default:function(){return ae}});var d=e(18106),P=e(63885),w=e(54421),Z=e(38272),J=e(12968),I=e(20352),q=e(48736),A=e(27049),R=e(57663),j=e(71577),s=e(90636),F=e(11849),D=e(34792),W=e(48086),g=e(3182),O=e(2824),M=e(88250),Q=e(67265),T=e(67294),z=e(37476),N=e(5966),V=e(31199),ee=e(24723),r=e(85893),C=function(b){return(0,r.jsxs)(z.Y,{title:"\u7F16\u8F91",layout:"horizontal",width:600+"px",labelCol:{span:4},wrapperCol:{span:14},initialValues:b.values,visible:b.updateModalVisible,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){b.onCancel()}},submitTimeout:2e3,onFinish:function(){var H=(0,g.Z)((0,s.Z)().mark(function K(B){var k,$;return(0,s.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return B.id=b.values.id,B.file=(B==null||(k=B.file)===null||k===void 0||($=k.file)===null||$===void 0?void 0:$.url)||b.values.image_url_ext,y.next=4,b.onSubmit(B);case 4:return y.abrupt("return",y.sent);case 5:case"end":return y.stop()}},K)}));return function(K){return H.apply(this,arguments)}}(),children:[(0,r.jsx)(N.Z,{name:"title",label:"\u6807\u9898"}),(0,r.jsx)(N.Z,{name:"page",label:"\u5C0F\u8BF4ID"}),(0,r.jsx)(V.Z,{min:0,max:1e9,name:"sort",label:"\u6392\u5E8F",extra:"\u8D8A\u5927\u8D8A\u9760\u524D"}),(0,r.jsx)(ee.Z,{extra:"\u56FE\u7247\u5BBD\u9AD8\u6BD4\u4F8B\u63A8\u835016/9\u6216\u80054/3",name:"file",value:[{uid:"-1",name:"files",status:"done",url:b.values.image_url,percent:100}]})]})},X=e(9715),t=e(55843),o=e(64317),_=e(2625),a=e(69363),p=function(b){var H=(0,T.useState)([]),K=(0,O.Z)(H,2),B=K[0],k=K[1];if(typeof b.values.cate_id=="string"){var $,Y;b.values.cate_id=($=b.values)===null||$===void 0||(Y=$.cate_id)===null||Y===void 0?void 0:Y.split(",").map(function(y){return y*1})}return(0,T.useEffect)(function(){(0,g.Z)((0,s.Z)().mark(function y(){var L;return(0,s.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,a.b)({});case 2:L=c.sent,L.code===0&&k(L.data);case 4:case"end":return c.stop()}},y)}))()},[]),(0,r.jsxs)(z.Y,{title:"\u7F16\u8F91",preserve:!1,layout:"horizontal",width:830+"px",labelCol:{span:4},wrapperCol:{span:18},initialValues:b.values,visible:b.updateModalVisible,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){b.onCancel()}},submitTimeout:2e3,onFinish:function(){var y=(0,g.Z)((0,s.Z)().mark(function L(x){var c,E;return(0,s.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return x.id=b.values.id,console.log(x.file),x.file=x==null||(c=x.file)===null||c===void 0||(E=c.file)===null||E===void 0?void 0:E.url,h.next=5,b.onSubmit(x);case 5:return h.abrupt("return",h.sent);case 6:case"end":return h.stop()}},L)}));return function(L){return y.apply(this,arguments)}}(),children:[(0,r.jsx)(N.Z,{name:"title",label:"\u6807\u9898"}),(0,r.jsx)(o.Z,{name:"cate_id",mode:"multiple",label:"\u5206\u7C7B",options:B.map(function(y){return{label:y.title,value:y.id}})}),(0,r.jsx)(V.Z,{min:0,max:1e9,name:"sort",label:"\u6392\u5E8F",extra:"\u8D8A\u5927\u8D8A\u9760\u524D"}),(0,r.jsx)(t.Z.Item,{label:"\u6A21\u5F0F",name:"type",extra:"* \u6A21\u5F0F\u4E09\u5FC5\u987B\u653E\u5728\u9875\u9762\u6700\u540E",children:(0,r.jsxs)(_.Z.Group,{onChange:function(L){console.log("value",L)},style:{display:"flex"},children:[(0,r.jsx)(_.Z,{title:"\u6A21\u5F0F\u4E00",description:(0,r.jsx)(I.Z,{width:150,preview:!1,src:"/images/1.png"}),value:1}),(0,r.jsx)(_.Z,{title:"\u6A21\u5F0F\u4E8C",description:(0,r.jsx)(I.Z,{width:150,preview:!1,src:"/images/2.png"}),value:2}),(0,r.jsx)(_.Z,{title:"\u6A21\u5F0F\u4E09",description:(0,r.jsx)(I.Z,{width:150,preview:!1,src:"/images/3.png"}),value:3})]})})]})},ne=function(){var H=(0,T.useState)(),K=(0,O.Z)(H,2),B=K[0],k=K[1],$=(0,T.useState)(),Y=(0,O.Z)($,2),y=Y[0],L=Y[1],x=(0,T.useState)(!1),c=(0,O.Z)(x,2),E=c[0],S=c[1],h=(0,T.useState)(!1),re=(0,O.Z)(h,2),ce=re[0],U=re[1],fe=(0,T.useState)(void 0),pe=(0,O.Z)(fe,2),ue=pe[0],ie=pe[1],ve=(0,T.useState)(void 0),me=(0,O.Z)(ve,2),le=me[0],oe=me[1],he=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v,u;return(0,s.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(v=W.ZP.loading("Configuring"),!ue){m.next=8;break}return n.id=ue.id,m.next=5,(0,M.Vx)((0,F.Z)({},n));case 5:u=m.sent,m.next=11;break;case 8:return m.next=10,(0,M.IH)((0,F.Z)({},n));case 10:u=m.sent;case 11:if(v(),u.code!==0){m.next=15;break}return W.ZP.success("\u66F4\u65B0\u6210\u529F"),m.abrupt("return",!0);case 15:return m.abrupt("return",!1);case 16:case"end":return m.stop()}},i)}));return function(n){return f.apply(this,arguments)}}(),Ze=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v,u;return(0,s.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(v=W.ZP.loading("Configuring"),!le){m.next=8;break}return n.id=le.id,m.next=5,(0,M.z)((0,F.Z)({},n));case 5:u=m.sent,m.next=11;break;case 8:return m.next=10,(0,M.vB)((0,F.Z)({},n));case 10:u=m.sent;case 11:if(v(),u.code!==0){m.next=15;break}return W.ZP.success("\u66F4\u65B0\u6210\u529F"),m.abrupt("return",!0);case 15:return m.abrupt("return",!1);case 16:case"end":return m.stop()}},i)}));return function(n){return f.apply(this,arguments)}}(),ge=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v;return(0,s.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,M.Od)({id:n==null?void 0:n.id});case 2:if(v=l.sent,v.code!==0){l.next=6;break}return te().then(function(m){}),l.abrupt("return",W.ZP.success(v.msg));case 6:case"end":return l.stop()}},i)}));return function(n){return f.apply(this,arguments)}}(),_e=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v;return(0,s.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,M.UU)({id:n==null?void 0:n.id});case 2:if(v=l.sent,v.code!==0){l.next=6;break}return de().then(function(m){}),l.abrupt("return",W.ZP.success(v.msg));case 6:case"end":return l.stop()}},i)}));return function(n){return f.apply(this,arguments)}}(),te=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(){var n;return(0,s.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,M.pb)({});case 2:n=u.sent,n.code===0&&k(n.data);case 4:case"end":return u.stop()}},i)}));return function(){return f.apply(this,arguments)}}(),de=function(){var f=(0,g.Z)((0,s.Z)().mark(function i(){var n;return(0,s.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,M.kC)({});case 2:n=u.sent,n.code===0&&L(n.data);case 4:case"end":return u.stop()}},i)}));return function(){return f.apply(this,arguments)}}();(0,T.useEffect)(function(){te().then(function(f){})},[]);var ye=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,r.jsx)(j.Z,{onClick:function(){S(!0)},type:"primary",children:"\u6DFB\u52A0"})}),(0,r.jsx)(A.Z,{}),(0,r.jsx)(Z.ZP,{itemLayout:"horizontal",dataSource:B,renderItem:function(n,v){return(0,r.jsx)(Z.ZP.Item,{children:(0,r.jsx)(Z.ZP.Item.Meta,{avatar:(0,r.jsx)(I.Z,{style:{width:"200px"},src:n.image_url}),title:(0,r.jsx)("div",{children:n.title}),description:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{children:["ID\uFF1A",n.page]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j.Z,{onClick:function(){S(!0),ie(n)},style:{marginRight:"12px"},size:"small",children:"\u7F16\u8F91"}),(0,r.jsx)(j.Z,{onClick:function(){return ge({id:n.id})},danger:!0,type:"primary",size:"small",children:"\u5220\u9664"})]})]})})})}})]})},Pe=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,r.jsx)(j.Z,{onClick:function(){return U(!0)},type:"primary",children:"\u6DFB\u52A0"})}),(0,r.jsx)(A.Z,{}),(0,r.jsx)(Z.ZP,{itemLayout:"horizontal",dataSource:y,renderItem:function(n,v){return(0,r.jsx)(Z.ZP.Item,{children:(0,r.jsx)(Z.ZP.Item.Meta,{avatar:(0,r.jsx)(I.Z,{style:{width:"200px"},src:"/images/"+n.type+".png"}),title:(0,r.jsx)("div",{children:n.title}),description:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["\u6392\u5E8F\uFF1A",n.sort]}),(0,r.jsx)("p",{children:n.created_at.replace("T"," ").replace(".000000Z","")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(j.Z,{onClick:function(){U(!0),oe(n)},style:{marginRight:"12px"},size:"small",children:"\u7F16\u8F91"}),(0,r.jsx)(j.Z,{onClick:function(){return _e({id:n.id})},danger:!0,type:"primary",size:"small",children:"\u5220\u9664"})]})]})})})}})]})};return(0,r.jsxs)(Q.ZP,{children:[(0,r.jsx)("div",{style:{backgroundColor:"#ffffff",padding:"12px"},children:(0,r.jsx)(P.Z,{onChange:function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){return(0,s.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n!=="2"){u.next=5;break}return u.next=3,de();case 3:u.next=7;break;case 5:return u.next=7,te();case 7:case"end":return u.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),defaultActiveKey:"1",items:["\u9996\u9875Banner","\u9996\u9875\u6A21\u5757"].map(function(f,i){var n=String(i+1);return{label:"".concat(f),key:n,children:i===0?ye():Pe()}})})}),(0,r.jsx)(C,{onSubmit:function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v;return(0,s.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,he(n);case 2:if(v=l.sent,!v){l.next=8;break}return S(!1),ie(void 0),l.next=8,te();case 8:case"end":return l.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),onCancel:function(){S(!1),ie(void 0)},updateModalVisible:E,values:ue||{}}),(0,r.jsx)(p,{onSubmit:function(){var f=(0,g.Z)((0,s.Z)().mark(function i(n){var v;return(0,s.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Ze(n);case 2:if(v=l.sent,!v){l.next=8;break}return U(!1),oe(void 0),l.next=8,de();case 8:case"end":return l.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),onCancel:function(){U(!1),oe(void 0)},updateModalVisible:ce,values:le||{}})]})},ae=ne},88250:function(se,G,e){"use strict";e.d(G,{pb:function(){return J},Qc:function(){return q},IH:function(){return R},Vx:function(){return s},Od:function(){return D},kC:function(){return g},vB:function(){return M},z:function(){return T},UU:function(){return N},GF:function(){return ee},m7:function(){return C}});var d=e(90636),P=e(11849),w=e(3182),Z=e(21704);function J(t){return I.apply(this,arguments)}function I(){return I=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/miniProgram/list",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),I.apply(this,arguments)}function q(t){return A.apply(this,arguments)}function A(){return A=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/ali/ossConfig",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),A.apply(this,arguments)}function R(t,o){return j.apply(this,arguments)}function j(){return j=(0,w.Z)((0,d.Z)().mark(function t(o,_){return(0,d.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.WY)("/api/miniProgram/add",(0,P.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return p.stop()}},t)})),j.apply(this,arguments)}function s(t,o){return F.apply(this,arguments)}function F(){return F=(0,w.Z)((0,d.Z)().mark(function t(o,_){return(0,d.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.WY)("/api/miniProgram/update",(0,P.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return p.stop()}},t)})),F.apply(this,arguments)}function D(t){return W.apply(this,arguments)}function W(){return W=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/miniProgram/remove",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),W.apply(this,arguments)}function g(t){return O.apply(this,arguments)}function O(){return O=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/miniProgram/indexPageList",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),O.apply(this,arguments)}function M(t,o){return Q.apply(this,arguments)}function Q(){return Q=(0,w.Z)((0,d.Z)().mark(function t(o,_){return(0,d.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.WY)("/api/miniProgram/addIndexPage",(0,P.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return p.stop()}},t)})),Q.apply(this,arguments)}function T(t,o){return z.apply(this,arguments)}function z(){return z=(0,w.Z)((0,d.Z)().mark(function t(o,_){return(0,d.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.WY)("/api/miniProgram/updateIndexPage",(0,P.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return p.stop()}},t)})),z.apply(this,arguments)}function N(t){return V.apply(this,arguments)}function V(){return V=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/miniProgram/removeIndexPage",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),V.apply(this,arguments)}function ee(t){return r.apply(this,arguments)}function r(){return r=(0,w.Z)((0,d.Z)().mark(function t(o){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.WY)("/api/miniProgram/setting",{method:"GET",params:(0,P.Z)({},o)}));case 1:case"end":return a.stop()}},t)})),r.apply(this,arguments)}function C(t,o){return X.apply(this,arguments)}function X(){return X=(0,w.Z)((0,d.Z)().mark(function t(o,_){return(0,d.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.WY)("/api/miniProgram/updateSetting",(0,P.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return p.stop()}},t)})),X.apply(this,arguments)}},69363:function(se,G,e){"use strict";e.d(G,{b:function(){return J},A:function(){return q}});var d=e(90636),P=e(11849),w=e(3182),Z=e(21704);function J(R,j){return I.apply(this,arguments)}function I(){return I=(0,w.Z)((0,d.Z)().mark(function R(j,s){return(0,d.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,Z.WY)("/api/book/cateIdName",(0,P.Z)({method:"GET",params:(0,P.Z)({},j)},s||{})));case 1:case"end":return D.stop()}},R)})),I.apply(this,arguments)}function q(R,j){return A.apply(this,arguments)}function A(){return A=(0,w.Z)((0,d.Z)().mark(function R(j,s){return(0,d.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,Z.WY)("/api/book/tagIdName",(0,P.Z)({method:"GET",params:(0,P.Z)({},j)},s||{})));case 1:case"end":return D.stop()}},R)})),A.apply(this,arguments)}}}]);
