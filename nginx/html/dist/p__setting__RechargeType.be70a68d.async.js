(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[734],{8212:function(D,F,e){"use strict";e.d(F,{Z:function(){return b}});var P=e(28991),f=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},C=g,Z=e(27029),j=function(p,T){return f.createElement(Z.Z,(0,P.Z)((0,P.Z)({},p),{},{ref:T,icon:C}))};j.displayName="EditOutlined";var b=f.forwardRef(j)},31199:function(D,F,e){"use strict";var P=e(22122),f=e(28991),g=e(81253),C=e(67294),Z=e(81160),j=["fieldProps","min","proFieldProps","max"],b=function(p,T){var S=p.fieldProps,n=p.min,o=p.proFieldProps,h=p.max,a=(0,g.Z)(p,j);return C.createElement(Z.Z,(0,P.Z)({mode:"edit",valueType:"digit",fieldProps:(0,f.Z)({min:n,max:h},S),ref:T,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},a))};F.Z=C.forwardRef(b)},64317:function(D,F,e){"use strict";var P=e(22122),f=e(28991),g=e(81253),C=e(22270),Z=e(67294),j=e(66758),b=e(81160),M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],p=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=Z.forwardRef(function(a,B){var R=a.fieldProps,U=a.children,L=a.params,K=a.proFieldProps,W=a.mode,$=a.valueEnum,A=a.request,z=a.showSearch,V=a.options,Y=(0,g.Z)(a,M),N=(0,Z.useContext)(j.Z);return Z.createElement(b.Z,(0,P.Z)({mode:"edit",valueEnum:(0,C.h)($),request:A,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({options:V,mode:W,showSearch:z,getPopupContainer:N.getPopupContainer},R),ref:B,proFieldProps:K},Y),U)}),S=Z.forwardRef(function(a,B){var R=a.fieldProps,U=a.children,L=a.params,K=a.proFieldProps,W=a.mode,$=a.valueEnum,A=a.request,z=a.options,V=(0,g.Z)(a,p),Y=(0,f.Z)({options:z,mode:W||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},R),N=(0,Z.useContext)(j.Z);return Z.createElement(b.Z,(0,P.Z)({mode:"edit",valueEnum:(0,C.h)($),request:A,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({getPopupContainer:N.getPopupContainer},Y),ref:B,proFieldProps:K},V),U)}),n=T,o=S,h=n;h.SearchSelect=o,h.displayName="ProFormComponent",F.Z=h},5966:function(D,F,e){"use strict";var P=e(22122),f=e(81253),g=e(67294),C=e(81160),Z=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],b="text",M=function(n){var o=n.fieldProps,h=n.proFieldProps,a=(0,f.Z)(n,Z);return g.createElement(C.Z,(0,P.Z)({mode:"edit",valueType:b,fieldProps:o,filedConfig:{valueType:b},proFieldProps:h},a))},p=function(n){var o=n.fieldProps,h=n.proFieldProps,a=(0,f.Z)(n,j);return g.createElement(C.Z,(0,P.Z)({mode:"edit",valueType:"password",fieldProps:o,proFieldProps:h,filedConfig:{valueType:b}},a))},T=M;T.Password=p,T.displayName="ProFormComponent",F.Z=T},53754:function(D){D.exports={boxContent:"boxContent___2HOZ8"}},94750:function(D,F,e){"use strict";var P=e(5632);F.Z=function(f){var g=(0,P.md)();return g.buttonHasAccess(f)?f.children:null}},21177:function(D,F,e){"use strict";e.r(F),e.d(F,{default:function(){return pe}});var P=e(62350),f=e(24565),g=e(57663),C=e(71577),Z=e(9715),j=e(55843),b=e(43358),M=e(34041),p=e(11849),T=e(34792),S=e(48086),n=e(90636),o=e(3182),h=e(2824),a=e(21704);function B(u,m){return R.apply(this,arguments)}function R(){return R=(0,o.Z)((0,n.Z)().mark(function u(m,y){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.WY)("/api/setting/rechargeType",(0,p.Z)({method:"GET",params:(0,p.Z)({},m)},y||{})));case 1:case"end":return i.stop()}},u)})),R.apply(this,arguments)}function U(u,m){return L.apply(this,arguments)}function L(){return L=(0,o.Z)((0,n.Z)().mark(function u(m,y){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.WY)("/api/setting/updateRechargeType",(0,p.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:m},y||{})));case 1:case"end":return i.stop()}},u)})),L.apply(this,arguments)}function K(u,m){return W.apply(this,arguments)}function W(){return W=(0,o.Z)((0,n.Z)().mark(function u(m,y){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.WY)("/api/setting/addRechargeType",(0,p.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:m},y||{})));case 1:case"end":return i.stop()}},u)})),W.apply(this,arguments)}function $(u){return A.apply(this,arguments)}function A(){return A=(0,o.Z)((0,n.Z)().mark(function u(m){return(0,n.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,a.WY)("/api/setting/removeRechargeType",{method:"get",params:(0,p.Z)({},m)}));case 1:case"end":return x.stop()}},u)})),A.apply(this,arguments)}var z=e(8212),V=e(73171),Y=e(80842),N=e(67265),O=e(67294),le=e(37476),ee=e(64317),re=e(5966),H=e(31199),r=e(85893),ue=function(u){var m=(0,O.useState)(u.values.pattern||0),y=(0,h.Z)(m,2),x=y[0],i=y[1];return u.values.pattern=u.values.pattern||0,(0,O.useEffect)(function(){i(u.values.pattern)},[u.values]),(0,r.jsxs)(le.Y,{title:"\u7F16\u8F91",width:600+"px",initialValues:u.values,visible:u.updateModalVisible,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){u.onCancel()}},submitTimeout:2e3,onFinish:function(){var G=(0,o.Z)((0,n.Z)().mark(function w(X){return(0,n.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return X.id=u.values.id,I.next=3,u.onSubmit(X);case 3:case"end":return I.stop()}},w)}));return function(w){return G.apply(this,arguments)}}(),children:[(0,r.jsx)(ee.Z,{fieldProps:{onChange:function(w){i(w)}},name:"pattern",label:"\u6A21\u5F0F",options:[{label:"\u6210\u4E3A\u4F1A\u5458",value:0},{label:"\u5145\u503C\u4E66\u5E01",value:1}]}),(0,r.jsx)(re.Z,{name:"title",label:"\u6807\u9898"}),(0,r.jsx)(re.Z,{name:"short_title",label:"\u5C0F\u6807\u9898"}),(0,r.jsx)(H.Z,{name:"price",min:1,label:"\u4EF7\u683C\uFF08\u5206\uFF09"}),x?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(H.Z,{name:"old_price",min:1,label:"\u539F\u4EF7\uFF08\u5206\uFF09"})}),x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{name:"coin",min:1,label:"\u4E66\u5E01\u6570"}),(0,r.jsx)(H.Z,{name:"give_coin",min:1,label:"\u8D60\u9001\u6570"})]}):null,x?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.Z,{name:"type",label:"\u7C7B\u578B",options:[{label:"\u5929",value:0},{label:"\u5468",value:1},{label:"\u6708",value:2},{label:"\u5B63\u5EA6",value:3},{label:"\u5E74",value:4}]}),(0,r.jsx)(H.Z,{name:"num",min:1,label:"\u6570\u91CF"})]})]})},ne=e(94750),ie=e(53754),oe=e.n(ie),de=function(){var m=(0,O.useState)(!1),y=(0,h.Z)(m,2),x=y[0],i=y[1],G=(0,O.useState)(!1),w=(0,h.Z)(G,1),X=w[0],q=(0,O.useRef)(),I=(0,O.useState)(),te=(0,h.Z)(I,2),J=te[0],k=te[1],ce=(0,O.useState)([]),ae=(0,h.Z)(ce,2),ve=ae[0],fe=ae[1],he=(0,O.useState)(1),se=(0,h.Z)(he,2),Q=se[0],me=se[1];(0,O.useEffect)(function(){(0,o.Z)((0,n.Z)().mark(function t(){return(0,n.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,_(Q);case 2:case"end":return s.stop()}},t)}))()},[]);var _=function(){var t=(0,o.Z)((0,n.Z)().mark(function c(s){var v;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,B({current:1,pageSize:100,isFirst:s});case 2:v=E.sent,fe(v.data);case 4:case"end":return E.stop()}},c)}));return function(s){return t.apply(this,arguments)}}(),Pe=function(){var t=(0,o.Z)((0,n.Z)().mark(function c(s){var v,d;return(0,n.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(v=S.ZP.loading("Configuring"),!J){l.next=8;break}return s.id=J==null?void 0:J.id,l.next=5,U((0,p.Z)({},s));case 5:d=l.sent,l.next=12;break;case 8:return s.isFirst=Q,l.next=11,K((0,p.Z)({},s));case 11:d=l.sent;case 12:if(v(),d.code!==0){l.next=18;break}return S.ZP.success("\u6210\u529F"),l.next=17,_(Q);case 17:return l.abrupt("return",!0);case 18:return l.abrupt("return",!1);case 19:case"end":return l.stop()}},c)}));return function(s){return t.apply(this,arguments)}}(),Ze=function(){var t=(0,o.Z)((0,n.Z)().mark(function c(s){var v,d;return(0,n.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(v=S.ZP.loading("\u6B63\u5728\u5220\u9664"),s){l.next=3;break}return l.abrupt("return",!0);case 3:return l.next=5,$({id:s==null?void 0:s.id});case 5:if(d=l.sent,v(),d.code!==0){l.next=10;break}return S.ZP.success("\u5220\u9664\u6210\u529F"),l.abrupt("return",!0);case 10:return l.abrupt("return",!1);case 11:case"end":return l.stop()}},c)}));return function(s){return t.apply(this,arguments)}}();return(0,r.jsxs)(N.ZP,{children:[(0,r.jsx)("div",{style:{backgroundColor:"#ffffff",width:"100%"},children:(0,r.jsxs)("div",{style:{padding:"12px",display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,r.jsx)(j.Z.Item,{label:"\u8BF7\u9009\u62E9\u7C7B\u578B",children:(0,r.jsx)(M.Z,{value:Q,onChange:function(){var t=(0,o.Z)((0,n.Z)().mark(function c(s){return(0,n.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return me(s),d.next=3,_(s);case 3:case"end":return d.stop()}},c)}));return function(c){return t.apply(this,arguments)}}(),style:{width:"120px"},options:[{label:"\u9996\u5145",value:1},{label:"\u8001\u7528\u6237",value:0}]})}),(0,r.jsx)(C.Z,{type:"primary",onClick:function(){i(!0),k(void 0)},children:"\u6DFB\u52A0"})]})}),(0,r.jsx)("div",{style:{marginTop:"12px",width:"101%",gap:"1%",display:"flex",flexWrap:"wrap",justifyContent:"flex-start"},children:ve.map(function(t){return(0,r.jsx)("div",{className:oe().boxContent,children:(0,r.jsxs)(Y.Z,{title:(0,r.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,r.jsx)("div",{style:{fontSize:"24px",fontWeight:"bolder"},children:t.title}),(0,r.jsx)("div",{style:{backgroundColor:"#aaaa33",color:"#ffffff",padding:"6px 6px",marginLeft:"12px",borderRadius:"24px",fontSize:"12px",height:"32px"},children:t.short_title}),(0,r.jsx)("div",{style:{backgroundColor:"#ff6666",color:"#ffffff",padding:"6px 6px",marginLeft:"12px",borderRadius:"24px",fontSize:"12px",height:"32px"},children:t.pattern==0?"\u4F1A\u5458\u5145\u503C":"\u91D1\u5E01\u5145\u503C"})]}),bordered:!0,style:{minWidth:"100%"},actions:[(0,r.jsx)(ne.Z,{access:"/book/updateCate",children:(0,r.jsx)("a",{onClick:(0,o.Z)((0,n.Z)().mark(function c(){return(0,n.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:i(!0),k(t);case 2:case"end":return v.stop()}},c)})),children:(0,r.jsx)(z.Z,{},"edit"+t.id)},"update"+t.id)},"update_if_"+t.id),(0,r.jsx)(ne.Z,{access:"/book/removeCate",children:(0,r.jsx)(f.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:(0,o.Z)((0,n.Z)().mark(function c(){var s;return(0,n.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Ze(t);case 2:if(s=d.sent,!s){d.next=6;break}return d.next=6,_(Q);case 6:case"end":return d.stop()}},c)})),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,r.jsx)(V.Z,{},"delete-btn-"+t.id)},"delete"+t.id)},"if_delete_"+t.id)],children:[t.pattern==1?(0,r.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bolder"},children:["\uFFE5",(t.price/100).toFixed(2)]}):null,(0,r.jsx)("div",{style:{fontSize:"16px",marginTop:"12px"},children:t.pattern==0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{style:{fontSize:"16px",fontWeight:"bolder"},children:["\u4EF7\u683C\uFF1A",(t.price/100).toFixed(2)]}),(0,r.jsxs)("span",{style:{textDecoration:"line-through",marginLeft:"24px",color:"#999999"},children:["\u539F\u4EF7\uFF1A",(t.old_price/100).toFixed(2)]})]}),(0,r.jsxs)("div",{children:["\u5468\u671F\uFF1A",t.num+["\u5929","\u5468","\u6708","\u5B63\u5EA6","\u5E74"][t.type]]})]}):(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:["\u4E66\u5E01\uFF1A",t.coin," ",(0,r.jsxs)("span",{style:{marginLeft:"24px"},children:["\u8D60\u9001\u4E66\u5E01\uFF1A",t.give_coin]})]})})})]})},"unique"+t.id)})}),(0,r.jsx)(ue,{onSubmit:function(){var t=(0,o.Z)((0,n.Z)().mark(function c(s){var v;return(0,n.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Pe(s);case 2:v=E.sent,v&&(i(!1),k(void 0),q.current&&q.current.reload());case 4:case"end":return E.stop()}},c)}));return function(c){return t.apply(this,arguments)}}(),onCancel:function(){i(!1),X||k(void 0)},updateModalVisible:x,values:J||{}})]})},pe=de}}]);
